# A resource descriptor is a declarative configuration file that defines the semantic data,  
# states, and state transitions associated with a particular resource independent of protocol 
# media-type. Further, it also defines protocol specific templates for links that can be 
# and  included in the response and populated based on the associated state. By including  
# optional routes related metadata in the configuration, routes.rb mappings can be managed  
# DRYly in the resource descriptor file.
#
# The following sections facilitate a number of objectives including generating an ALPS profile 
# of the resource, generating human readable documents including sample representations, 
# decorating service responses, and scaffolding routes, controllers and models.

id: EXTERNAL_EXAMPLE
version: v1.0.0
doc: Describes the semantics, states and state transitions associated with external-example.
links:
  self: EXTERNAL_EXAMPLE
  help: documentation_base/Things/EXTERNAL_EXAMPLE
 
# This section associates a simple state-machine DSL with the particular resource. It shows
# the state name and lists the data and application affordances available in that state, 
# conditions for inclusion of a transition in a response and what states are exposed by 
# following the transitions.


# Semantic descriptors represent semantic definitions of data and thus in the context of ALPS 
# represent type='semantic' descriptors. Elements MAY include a sample value that can be used 
# to generate sample representations of the a resource in different media-types.
#
# Transition descriptors represent application affordances and in the context of ALPS 
# represent type='safe,unsafe,idempotent' descriptors. 

descriptors:
  external-example:
    doc: 
      html: <p>A list of external-examples.</p>
    type: semantic
    links:
      self: EXTERNAL_EXAMPLE#external-example
    descriptors:
      # Semantics
      total_count:
        doc: The total count of external-examples.
        type: semantic
        href: http://alps.io/schema.org/Integer
        sample: 1
      items:
        doc: An array of embedded external-example resources.
        type: semantic
        href: Array
        embed: multiple # Select non-ALPS values are treated as extensions in the profile.
      # Transitions
      list:
        doc: Returns a list of external-examples.
        name: self
        type: safe
        rt: external-example
      search:
        doc: Returns a list of external-examples that satisfy the search term.
        type: safe
        rt: external-example
        descriptors:
          search_term:
            doc: The terms to search.
            type: semantic
            href: http://alps.io/schema.org/Text
      create:
        doc: Creates a EXTERNAL_EXAMPLE element.
        type: unsafe
        rt: external_examples_element
        descriptors:
          create-external_example:
            type: semantic
            href: update-external-example # Indicates that this should dereference update-drd
            links:
              self: EXTERNAL_EXAMPLE#create-external-example
              help: documentation_base/Forms/create-external-example
            descriptors:
              form-name:
                name: name
                doc: The name of the external-example.
                type: semantic
                href: http://alps.io/schema.org/Text
                field_type: input
                validators:
                  - presence
              form-leviathan_uuid:
                name: leviathan_uuid
                doc: The UUID of the creator Leviathan.
                type: semantic
                href: http://alps.io/schema.org/Text
                field_type: select
                enum:
                  href: Leviathans#list
                validators:
                  - presence
          external-example-drd:
            type: semantic
            href: http://127.0.0.1/AlpsProfiles/testdata_alps.xml#testdata/create/create-testdata
  external-example_element:
    doc: |
      Diagnostic Repair Drones or DRDs are small robots that move around Leviathans. They are
      built by a Leviathan as it grows.
    type: semantic
    links:
      self: EXTERNAL_EXAMPLE#external-example-element
    descriptors:
      # Semantics
      uuid:
        doc: The UUID of the EXTERNAL_EXAMPLE_ELEMENT.
        type: semantic
        href: http://alps.io/schema.org/Text
        sample: 007d8e12-babd-4f2c-b01e-8b5e2f749e1b           
      name:
        doc: The name of the EXTERNAL_EXAMPLE_ELEMENT.
        type: semantic
        href: http://alps.io/schema.org/Text
        sample: 1812
      status:
        doc: How is the EXTERNAL_EXAMPLE_ELEMENT.
        type: semantic
        href: http://alps.io/schema.org/Text
        sample: renegade
      kind:
        doc: What kind is it.
        type: semantic
        href: http://alps.io/schema.org/Text
        sample: standard
      leviathan_uuid:
        doc: The UUID of the creator Leviathan.
        type: semantic
        href: http://alps.io/schema.org/Text
        sample: 007d8e12-babd-4f2c-b01e-8b5e2f749e1b
      built_at:
        doc: When the EXTERNAL_EXAMPLE_ELEMENT was constructed.
        type: semantic
        href: http://alps.io/schema.org/DateTime
        sample: 2013-03-20T00:00:00+00:00
      leviathan:
        doc: The associated Leviathan resource.
        type: semantic
        href: http://alps.io/schema.org/Thing/Leviathan
        embed: optional
      # Transitions
      show:
        doc: Shows a particular EXTERNAL_EXAMPLE_ELEMENT.
        name: self
        type: safe
        rt: drd
      leviathan-link:
        name: leviathan
        doc: A reference to the Leviathan the EXTERNAL_EXAMPLE_ELEMENT sits on.
        type: safe
        embed: true
        rt: Leviathan#leviathan
      delete:
        doc: Drops a EXTERNAL_EXAMPLE_ELEMENT out an air-lock.
        type: idempotent    

